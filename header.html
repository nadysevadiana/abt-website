var VERSION = '20251011b';

/* === CTA LABEL CONTROL ===============================================
   On index: "Выбрать пакет"; on other pages: "На главную".
   Works even when header.html is injected dynamically.
===================================================================== */
(function(){
  function applyCtaLabel(){
    var desktop = document.getElementById('cta-desktop');
    var mobile  = document.getElementById('cta-mobile');
    var file    = (window.location.pathname.split('/').pop() || '').toLowerCase();
    var isIndex = file === '' || file === 'index.html' || file === 'index.htm';
    var label   = isIndex ? 'Выбрать пакет' : 'На главную';
    [desktop, mobile].forEach(function(el){
      if(!el) return;
      var span = el.querySelector('.cta-text');
      if(span) span.textContent = label; else el.textContent = label;
      try{ el.setAttribute('href', 'index.html#choose-path'); }catch(e){}
    });
  }

  // Run after DOM is ready
  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', applyCtaLabel);
  } else {
    applyCtaLabel();
  }

  // Re-apply when header gets injected or re-rendered
  var mo = new MutationObserver(applyCtaLabel);
  mo.observe(document.documentElement, { childList: true, subtree: true });

  // Also re-apply on hash changes (cheap safeguard)
  window.addEventListener('hashchange', applyCtaLabel);
})();